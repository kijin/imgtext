
IMGText 소개
------------

IMGText는 주어진 문자열의 각 단어를 PNG 이미지로 변환하고,
그 이미지들을 일반적인 글자처럼 자연스럽게 디스플레이할 수 있도록
HTML 마크업을 생성해 주는 PHP 라이브러리입니다.

[이 문서는 영어로도 읽으실 수 있습니다.](./README.md)

### 코드 예제:

    $imgtext = new IMGText;
    $imgtext->cache_url_prefix = '.';
    $imgtext->cache_local_dir = dirname(__FILE__);
    $imgtext->font_dir = '/usr/share/fonts/truetype/nanum';
    echo $imgtext->get_html("네이버 '나눔손글씨 붓'으로 작성된 제목",
        'nanumbrush', 24, '666', false, $height);

### 출력 결과:

> <img class="imgtext" src="https://github.com/kijin/imgtext/raw/master/example/imgtext.70da76625ab8.word-001.png" alt="네이버" title="" />&nbsp;
  <img class="imgtext" src="https://github.com/kijin/imgtext/raw/master/example/imgtext.70da76625ab8.word-002.png" alt="&#039;나눔손글씨" title="" />&nbsp;
  <img class="imgtext" src="https://github.com/kijin/imgtext/raw/master/example/imgtext.70da76625ab8.word-003.png" alt="붓&#039;으로" title="" />&nbsp;
  <img class="imgtext" src="https://github.com/kijin/imgtext/raw/master/example/imgtext.70da76625ab8.word-004.png" alt="작성된" title="" />&nbsp;
  <img class="imgtext" src="https://github.com/kijin/imgtext/raw/master/example/imgtext.70da76625ab8.word-005.png" alt="제목" title="" />&nbsp;

### 왜 IMGText가 필요하죠?

대부분의 서양 언어들은 웹 폰트를 사용하여 아름답게 꾸밀 수 있습니다.
서양의 문자 체계들은 대개 수십 개의 기호만을 사용하기 때문에,
웹 폰트의 용량도 수십 KB에 불과하여 간편하게 다운로드가 가능합니다.
그러나 한국어, 일본어, 중국어 등 동양의 문자 체계들은
수천-수만 가지 기호 및 조합으로 이루어져 있어 웹 폰트 이용에 무리가 있습니다.
폰트 파일의 크기가 수 MB에 달하여 다운로드에 상당한 시간이 소요되기 때문입니다.

그래서 동양의 웹 디자이너들은 OS의 기본 글꼴들만을 사용하는 경우가 많고,
글자를 아름답게 꾸미고 싶을 때면 이미지를 사용해야 합니다.
(캔버스 태그 등의 최신 기술은 오래된 브라우저에서 지원되지 않아 곤란합니다.)
그러나 OS의 기본 글꼴을 웹 페이지의 표제 등에 적용하는 것은 미관상 문제가 있고,
이미지를 사용하려면 아래와 같은 불이익을 감수해야 합니다.

  - 각각의 이미지를 직접 만들어야 하며, 장기간에 걸쳐 동일한 글꼴과 글자 크기,
    색상 등을 유지하기가 힘듭니다.
  - 검색 엔진과 스크린 리더는 이미지 속의 글자들을 인식하지 못합니다.
    이미지를 글자로 인식하려면 alt 텍스트를 별도로 넣어주어야 하는데,
    이것도 직접 코딩하려면 상당히 어렵습니다.
  - 일반적인 글자는 화면 크기에 따라 쉽게 배치를 조절할 수 있지만,
    이미지는 확대와 축소밖에 할 수 없어 모바일 기기에서 보면 레이아웃이 깨지거나
    이미지 속의 글자가 너무 작아 읽기 힘든 경우가 있습니다.

IMGText는 이와 같은 문제들을 해결하기 위해 만든 라이브러리입니다.
동양의 문자 체계를 웹 폰트화하는 어려운 문제를 당장 해결하기보다는,
현실의 제약 안에서 가능한 쉽게 아름다운 글꼴을 사용할 수 있도록 도와 드립니다.

  - 문자열, 글꼴, 그리고 크기와 색상 등의 몇몇 옵션을 설정하면
    IMGText는 문자열 내의 각 단어를 PNG 이미지로 변환하고
    그 이미지들을 일반적인 글자처럼 자연스럽게 디스플레이할 수 있도록
    HTML 마크업을 자동으로 생성해 줍니다.
  - 각 단어가 별도의 이미지로 변환되므로, 화면 폭이 달라져도
    일반적인 글자처럼 저절로 재배치됩니다.
    (문자열이 상당수의 빈 칸을 포함해야 단어를 인식할 수 있습니다.
    IMGText는 한국어에 최적화되어 있으므로, 빈 칸을 사용하지 않는 언어는
    한국어처럼 자연스럽게 단어가 구분되지 않을 수도 있습니다.)
  - <img> 태그의 "imgtext" 클래스에 CSS나 JavaScript를 연결하여
    쉽게 다양한 스타일을 구현할 수 있습니다.
  - 각 이미지에는 원래의 단어가 alt 텍스트로 연결되어
    검색 엔진이나 스크린 리더를 정상적으로 사용할 수 있도록 해 줍니다.
  - 인터넷 익스플로러에서 이미지에 마우스 오버시 alt 텍스트가 표시되는
    문제를 해결했습니다.
  - 생성된 이미지와 HTML 마크업은 캐시에 저장되어,
    동일한 스타일의 동일한 문자열을 반복 요청할 경우
    매우 빠르게 캐시된 컨텐츠를 보여줍니다.
  
IMGText는 웹 페이지의 표제를 비롯한 큰 글씨에 적용하는 것이 가장 좋습니다.
긴 글은 수백 개의 작은 이미지로 분할되어 불편을 끼칠 우려가 있으므로,
문서의 본문에 적용하는 것은 추천하지 않습니다.

### API 레퍼런스

IMGText를 사용하려면 `imgtext.php` 파일을 include 하십시오.
그 밖에 아래의 것들이 필요합니다:

  - 필요한 문자들을 포함한 TTF 글꼴 파일.
  - 쓰기 가능한 캐시 디렉토리.
    생성된 PNG 이미지와 메타데이터가 여기에 저장됩니다.
    웹 사이트 방문객들이 접근할 수 있는 경로여야 합니다.

IMGText의 실제 사용 예제는 위를 참고하십시오.
다음은 IMGText 클래스의 메소드와 속성들에 대한 정보입니다.

#### 속성들

  - _문자열_ **cache_url_prefix** (필수):
    웹 사이트 방문객들이 접근할 수 있는 캐시 디렉토리의 경로를 지정해 주십시오.
    생성된 HTML 마크업은 이 경로를 참조하게 됩니다.
    마지막에 `/` 문자를 포함하지 마십시오.
    예: `./images/cache`

  - _문자열_ **cache_local_dir** (필수):
    위와 동일한 캐시 디렉토리의 로컬 경로를 지정해 주십시오.
    생성된 PNG 이미지와 메타데이터가 여기에 저장됩니다.
    마지막에 `/` 문자를 포함하지 마십시오.
    예: `/srv/www/website_name/htdocs/images/cache`

  - _문자열_ **font_dir** (필수):
    글꼴 파일들이 저장되어 있는 로컬 경로를 지정해 주십시오.
    마지막에 `/` 문자를 포함하지 마십시오.
    예: `/usr/share/fonts`.
  
  - _문자열_ **font_ext** (optional):
    사용할 글꼴 파일들의 확장자를 지정할 수 있습니다. 기본값은 `ttf`입니다.
    OTF 글꼴 파일을 사용하려면 이 속성을 변경해야 합니다.
    이 속성은 대소문자를 구별합니다.

#### get_html() 메소드

인수들:

  - _문자열_ **$text** (필수):
    디스플레이할 문자열을 지정하여 주십시오.
  - _문자열_ **$font** (필수):
    사용할 글꼴 파일의 이름을 지정하여 주십시오.
    이 인수는 대소문자를 구별합니다. 
  - _정수_ **$size**  (필수):
    사용할 글자 크기를 지정해 주십시오. 단위는 포인트입니다.
  - _16진수_ **$color** (optional):
    글자 색상을 지정해 주십시오.
    문법은 `000000` (검정), `ffffff` (흰색) 등 CSS 색상과 동일합니다.
    `f00` (빨강) 등 3글자로 단축된 형태도 지원합니다.
    지정하지 않을 경우 기본값은 검은색입니다.
  - _16진수_ **$bg** (optional):
    배경 색상을 지정해 주십시오. 문법은 위와 동일합니다.
    투명한 배경을 지정하려면 `false`를 사용하십시오.
    지정하지 않을 경우 기본값은 투명입니다.
  - _정수_ **$height** (optional):
    생성할 이미지들의 높이를 지정할 수 있습니다. 단위는 픽셀입니다.
    이 인수를 사용하면 이미지들의 높이를 특정한 값으로 강제할 수 있습니다.
    지정하지 않을 경우 상하로 가장 긴 글자의 높이를 사용합니다.
  - _배열_ **$margins** (optional):
    각각의 이미지 주위에 넣을 여백을 지정할 수 있습니다. 단위는 픽셀입니다.
    이 인수의 값은 4개의 정수를 포함한 배열이어야 합니다.
    정수들은 CSS와 동일한 순서로 나열해 주십시오. 위-오른쪽-아래-왼쪽입니다.
    글자의 일부분이 틀 밖으로 벗어나는 글꼴을 사용하실 경우 유용한 기능입니다.
    이 경우 CSS를 이용하여 각각의 이미지 주위에 마이너스 여백을 주어
    단어 간격을 조절해 주시는 것이 좋습니다.

반환값: HTML 마크업을 포함한 문자열.

  - 각 `<img>` 태그는 `imgtext` 클래스를 가집니다.
    이 클래스에 스타일을 지정하거나 JavaScript로 조작할 수 있습니다.
  - 각 `<img>` 태그 사이에는 공백 문자(0x20)가 들어갑니다.
    원래 문자열의 단어들 사이에 다수의 공백이 있었더라도
    공백 문자는 반드시 한 칸씩만 사용합니다.
    줄바꿈 문자도 동일하게 취급되므로, 문자열 중간에 줄바꿈이 있는 경우
    한 줄씩 별도로 변환해 주시는 것이 좋습니다.
  - 생성된 HTML 중 위험한 요소들은 이미 `htmlspecialchars()` 처리를 거치므로
    추후 별도로 처리하실 필요가 없습니다.
  - 생성된 HTML 마크업은 UTF-8으로 인코딩된 문서에 삽입하셔야 합니다.

### 세부 정보

IMGText는 PHP 5 이상에서 작동하며, GD 모듈에 의존합니다.
모든 문자열은 UTF-8로 인코딩되어야 합니다.

ImgText는 글꼴 파일을 포함하지 않습니다.
사용자가 보유한 TTF 파일을 사용하셔야 합니다.

IMGText는 MIT 라이선스의 적용을 받는 오픈 소스 소프트웨어입니다.
개인적, 비영리, 영리, 정부 등 어떤 목적으로도 자유롭게 사용하실 수 있습니다.
